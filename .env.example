# ==============================================================================
# Discord Social Analyzer - Environment Configuration
# ==============================================================================
# Copy this file to .env and fill in your values
# DO NOT commit .env to git - it contains sensitive information!

# ==============================================================================
# DISCORD CONFIGURATION
# ==============================================================================

# REQUIRED: Your Discord bot token from https://discord.com/developers/applications
# How to get: Create app → Bot → Copy Token
DISCORD_TOKEN=your_bot_token_here

# Optional: Specific guild (server) ID to monitor
# Leave empty to monitor all guilds the bot is in
# To get: Enable Developer Mode in Discord → Right-click server → Copy ID
DISCORD_GUILD_ID=

# Command prefix for bot commands
COMMAND_PREFIX=!

# ==============================================================================
# DATABASE CONFIGURATION
# ==============================================================================

# Option 1: Full database URL (recommended)
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/discord_analyzer

# Option 2: Individual components (alternative to DATABASE_URL)
# If all these are set, they override DATABASE_URL
# DB_HOST=localhost
# DB_PORT=5432
# DB_USER=postgres
# DB_PASSWORD=your_password
# DB_NAME=discord_analyzer

# ==============================================================================
# WHISPER TRANSCRIPTION CONFIGURATION
# ==============================================================================

# Model size - affects quality vs speed
# Options: tiny, base, small, medium, large-v2, large-v3
# Recommendations:
#   - tiny: Testing only (fastest, lowest quality)
#   - base: Development/testing (good balance)
#   - small: Production for real-time (good quality, fast)
#   - medium: Production for quality (high quality, slower)
#   - large-v3: Best quality (slow, needs powerful GPU)
WHISPER_MODEL=base

# Device to use for transcription
# Options: cuda (GPU), cpu
# Note: CPU is MUCH slower - only use if no GPU available
WHISPER_DEVICE=cuda

# Compute precision type
# Options: float16, int8, int8_float16
# Recommendations:
#   - float16: Best quality (requires GPU)
#   - int8: Faster, slightly lower quality
#   - int8_float16: Balance of speed and quality
WHISPER_COMPUTE_TYPE=float16

# Enable Voice Activity Detection (filters silence)
# Recommended: true (reduces unnecessary processing)
WHISPER_VAD_ENABLED=true

# Minimum silence duration in milliseconds for VAD
# Higher = more aggressive filtering
WHISPER_VAD_MIN_SILENCE_MS=500

# ==============================================================================
# VECTOR STORE CONFIGURATION (Optional - for future features)
# ==============================================================================

# Enable Qdrant vector database
# Set to true when implementing semantic search/topic clustering
QDRANT_ENABLED=false

# Qdrant server connection
QDRANT_HOST=localhost
QDRANT_PORT=6333

# Collection name for storing utterance embeddings
QDRANT_COLLECTION=utterances

# Optional: API key if using Qdrant Cloud
QDRANT_API_KEY=

# ==============================================================================
# AUDIO PROCESSING CONFIGURATION
# ==============================================================================

# Discord's native sample rate (don't change unless you know what you're doing)
AUDIO_SAMPLE_RATE=48000

# Seconds to accumulate audio before transcribing
# Lower = more responsive but more overhead
# Higher = less overhead but delayed transcription
# Recommended: 5 for good balance
AUDIO_CHUNK_DURATION=5

# Seconds of silence before considering utterance complete
# Prevents cutting off mid-sentence
AUDIO_SILENCE_THRESHOLD=2.0

# Minimum audio duration to transcribe (seconds)
# Filters out very short noises
AUDIO_MIN_DURATION=0.5

# ==============================================================================
# SESSION MANAGEMENT CONFIGURATION
# ==============================================================================

# Seconds of inactivity before auto-ending session
# Prevents orphaned sessions from silent channels
SESSION_TIMEOUT=300

# Automatically cleanup ended sessions
SESSION_AUTO_CLEANUP=true

# ==============================================================================
# ANALYSIS CONFIGURATION
# ==============================================================================

# Time window for considering utterances as "interactions" (seconds)
# Two utterances within this window count as interaction
ANALYSIS_INTERACTION_WINDOW=5

# Default number of keywords to extract
ANALYSIS_DEFAULT_KEYWORD_LIMIT=20

# ==============================================================================
# PERFORMANCE CONFIGURATION
# ==============================================================================

# Number of worker threads for transcription
# More workers = more concurrent processing
# Don't set higher than CPU core count
TRANSCRIPTION_WORKERS=2

# Maximum concurrent transcriptions
# Prevents overwhelming the GPU
TRANSCRIPTION_MAX_CONCURRENT=5

# ==============================================================================
# LOGGING CONFIGURATION
# ==============================================================================

# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
# DEBUG: Everything (very verbose)
# INFO: General information (recommended)
# WARNING: Only warnings and errors
# ERROR: Only errors
LOG_LEVEL=INFO

# Log file name
LOG_FILE=bot.log

# Enable console logging (prints to terminal)
LOG_TO_CONSOLE=true

# Enable file logging (saves to LOG_FILE)
LOG_TO_FILE=true

# ==============================================================================
# FEATURE FLAGS
# ==============================================================================

# Enable/disable major features
# Useful for testing or gradual rollout

# Enable voice transcription
FEATURE_TRANSCRIPTION=true

# Enable text message logging
FEATURE_MESSAGE_LOGGING=true

# Enable session tracking
FEATURE_SESSION_TRACKING=true

# ==============================================================================
# SECURITY CONFIGURATION (Optional)
# ==============================================================================

# Restrict bot to specific users (comma-separated Discord user IDs)
# Leave empty to allow all users
# Example: ALLOWED_USER_IDS=123456789,987654321
ALLOWED_USER_IDS=

# Restrict bot to specific channels (comma-separated Discord channel IDs)
# Leave empty to allow all channels
# Example: ALLOWED_CHANNEL_IDS=123456789,987654321
ALLOWED_CHANNEL_IDS=

# Admin users who can use management commands (comma-separated user IDs)
# These users have elevated permissions
# Example: ADMIN_USER_IDS=123456789
ADMIN_USER_IDS=

# ==============================================================================
# NOTES
# ==============================================================================

# REQUIRED SETTINGS (must be set):
#   - DISCORD_TOKEN

# RECOMMENDED SETTINGS TO REVIEW:
#   - WHISPER_MODEL (adjust based on your hardware)
#   - DATABASE_URL (change default password!)
#   - LOG_LEVEL (INFO for production, DEBUG for development)

# PERFORMANCE TUNING:
#   For speed: Use WHISPER_MODEL=small, increase AUDIO_CHUNK_DURATION
#   For quality: Use WHISPER_MODEL=large-v3, decrease AUDIO_CHUNK_DURATION
#   For CPU only: Set WHISPER_DEVICE=cpu, use WHISPER_MODEL=tiny or base

# GETTING DISCORD IDS:
#   1. Enable Developer Mode: User Settings → Advanced → Developer Mode
#   2. Right-click on user/channel/server → Copy ID

# SECURITY BEST PRACTICES:
#   - Never commit .env to git (it's in .gitignore)
#   - Use strong database password in production
#   - Restrict ALLOWED_USER_IDS and ALLOWED_CHANNEL_IDS if needed
#   - Keep DISCORD_TOKEN secret

# ==============================================================================
